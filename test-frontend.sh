#!/bin/bash

echo "üß™ Testing Frontend Setup..."
echo ""

cd frontend

echo "1Ô∏è‚É£ Checking dependencies..."
if [ ! -d "node_modules" ]; then
  echo "‚ùå node_modules not found. Run: npm install"
  exit 1
fi
echo "‚úÖ Dependencies installed"

echo ""
echo "2Ô∏è‚É£ Checking file structure..."
REQUIRED_FILES=(
  "src/app/page.tsx"
  "src/app/layout.tsx"
  "src/app/globals.css"
  "src/components/InputModule.tsx"
  "src/components/ControlPanel.tsx"
  "src/components/VisualizationCanvas.tsx"
  "src/components/ExplanationPanel.tsx"
  "src/store/visualizationStore.ts"
  "src/services/api.ts"
  "src/types/index.ts"
  "package.json"
  "tsconfig.json"
  ".env.local"
)

for file in "${REQUIRED_FILES[@]}"; do
  if [ ! -f "$file" ]; then
    echo "‚ùå Missing: $file"
    exit 1
  fi
done
echo "‚úÖ All required files present"

echo ""
echo "3Ô∏è‚É£ Checking TypeScript..."
npx tsc --noEmit
if [ $? -eq 0 ]; then
  echo "‚úÖ TypeScript check passed"
else
  echo "‚ùå TypeScript check failed"
  exit 1
fi

echo ""
echo "4Ô∏è‚É£ Checking ESLint..."
npm run lint
if [ $? -eq 0 ]; then
  echo "‚úÖ ESLint check passed"
else
  echo "‚ùå ESLint check failed"
  exit 1
fi

echo ""
echo "5Ô∏è‚É£ Building production..."
npm run build
if [ $? -eq 0 ]; then
  echo "‚úÖ Production build successful"
else
  echo "‚ùå Production build failed"
  exit 1
fi

echo ""
echo "üéâ All tests passed!"
echo ""
echo "To start the development server:"
echo "  cd frontend && npm run dev"
echo ""
echo "To start the production server:"
echo "  cd frontend && npm start"
